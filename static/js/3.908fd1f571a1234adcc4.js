webpackJsonp([3,5],{"8+NW":function(t,e){},"99O4":function(t,e,i){"use strict";var a=i("d7EF"),n=i.n(a),s=i("Gu7T"),r=i.n(s),o=i("Xxa5"),c=i.n(o),l=i("//Fk"),u=i.n(l),d=i("exGp"),h=i.n(d),p=i("Zrlr"),v=i.n(p),m=i("wxAW"),f=i.n(m),_=i("5IcD"),g=i.n(_),b=i("zf2T");function y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0==e?Object(b.a)(t):e>0?Object(b.a)(t).times(Object(b.a)("1"+"0".repeat(e))):Object(b.a)(t).div(Object(b.a)("1"+"0".repeat(-e)))}function C(t){return y(t,-18)}b.a.config({DECIMAL_PLACES:18,ROUNDING_MODE:b.a.ROUND_DOWN,EXPONENTIAL_AT:256});var w=function(){function t(){v()(this,t),this.web3=null,this.ethereum=null,this.account=null,this.oracleUrl=null,this.addresses=null,this.abifiles=null,this.methods=null,this.pool=null,this.bToken=null,this.pToken=null,this.lToken=null,this.symbol=null,this.bSymbol=null,this.bDecimals=null,this.multiplier=null,this.feeRatio=null,this.minPoolMarginRatio=null,this.minInitialMarginRatio=null,this.minMaintenanceMarginRatio=null,this.minAddLiquidity=null,this.redemptionFeeRatio=null,this.fundingRateCoefficient=null,this.minLiquidationReward=null,this.maxLiquidationReward=null,this.liquidationCutRatio=null,this.priceDelayAllowance=null,this.oracle={},this.balance={},this.position={volume:y(0),cost:y(0),lastCumuFundingRate:y(0),margin:y(0),lastUpdateTimestamp:y(0)},this.states={}}return f()(t,[{key:"initialize",value:function(){var t=h()(c.a.mark(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.web3=new g.a(new g.a.providers.HttpProvider("https://ropsten.infura.io/v3/194f1b2b258e45ad9e50d5e30f2ec8bb")),t.next=3,this._initializeContracts(e);case 3:return t.next=5,this._initializeParameters();case 5:return t.next=7,u.a.all([this._updateStates()]);case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"_call",value:function(){var t=h()(c.a.mark(function t(e,i){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(a=e.methods)[this.methods[i]].apply(a,r()(n)).call();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e,i){return t.apply(this,arguments)}}()},{key:"_readjson",value:function(){var t=h()(c.a.mark(function t(e){var i;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("static/config/"+e);case 2:return i=t.sent,t.next=5,i.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_initializeContracts",value:function(){var t=h()(c.a.mark(function t(e){var i,a,s,r,o,l;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._readjson("config.json");case 3:return i=t.sent,this.addresses=i.addresses[e],this.abifiles=i.abifiles,this.methods=i.methods,t.next=9,u.a.all([this._readjson(this.abifiles.pool),this._readjson(this.abifiles.bToken),this._readjson(this.abifiles.lToken)]);case 9:a=t.sent,s=n()(a,3),r=s[0],o=s[1],l=s[2],this.pool=new this.web3.eth.Contract(r,this.addresses.pool),this.bToken=new this.web3.eth.Contract(o,this.addresses.bToken),this.lToken=new this.web3.eth.Contract(l,this.addresses.lToken),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(0),console.log("Chain: _initializeContracts() error: "+t.t0);case 22:case"end":return t.stop()}},t,this,[[0,19]])}));return function(e){return t.apply(this,arguments)}}()},{key:"_initializeParameters",value:function(){var t=h()(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._call(this.pool,"symbol");case 3:return this.symbol=t.sent,t.next=6,this._call(this.bToken,"symbol");case 6:this.bSymbol=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("Chain: _initializeParameters() error: "+t.t0);case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(){return t.apply(this,arguments)}}()},{key:"_updateStates",value:function(){var t=h()(c.a.mark(function t(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._call(this.pool,"getStateValues");case 3:e=t.sent,this.states.cumuFundingRate=C(e.cumuFundingRate),this.states.cumuFundingRateBlock=y(e.cumuFundingRateBlock),this.states.liquidity=C(e.liquidity),this.states.tradersNetVolume=C(e.tradersNetVolume),this.states.tradersNetCost=C(e.tradersNetCost),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])}));return function(){return t.apply(this,arguments)}}()}]),t}();e.a=w},CR0J:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAABx0lEQVQ4T5XUz6tNURTA8e83XhggJpJ6kafkx4huEgOUmUIZeOSZGWB46xGK+BPEwEBJDIxN8JQoA8TA0I9SEiFRlLS0bvvczj1u3ePM9tl7f/bea629pfFFxHLgNrBffdHsH9W2PqBg94EfwFkgRgGl/zvwQP3VBM8UqKUzMOwJ0GmCY8BNYBWwDfjWUl4PPAM2DoA5OSJmA+eBy+rbNmBEbM0jA6v/ASsgItYCH9VPo9CIyFAdUZf1wYg4BjxXH5adPgZm1JMtwEzke/VAD4yIjN0XYFq9WP49LWA3IrYAc9R7Q8psLvAVOK5eqcDNwCNgnfpyCHgdWKDuGgJm8maACfVVBZ4CjqpLazGs77APRkQCO9UTZeFzwGF1PNsVmCt8UCdbgKeBKXWigJndN+pUD4yIeSV+vRjUwH5SIuJqOfLeiJgGDqlrCvgO6KpZvz1wB3AXWKm+HlY2EZHHGcsYRcQiYLy657kh9Wc1L8ELwKS6YlR51BbbDcxXrzXnJHgDWKJu/w+wA9wpZXapPi/BPcAt4DPwpy0KLASyBjtqPgy9r8ryBmATMKsluBjIG5Tv5j719wDYEukPi4huvizAwTqWA/4C4wDcZfMSfOoAAAAASUVORK5CYII="},ChPY:function(t,e){},Dd8w:function(t,e,i){"use strict";e.__esModule=!0;var a,n=i("woOf"),s=(a=n)&&a.__esModule?a:{default:a};e.default=s.default||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}},IByY:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("bOdI"),n=i.n(a),s=i("zMny"),r=i("7t+N"),o=i.n(r),c=i("zf2T"),l=i("zH3I"),u=i.n(l);function d(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0==e?Object(c.a)(t):e>0?Object(c.a)(t).times(Object(c.a)("1"+"0".repeat(e))):Object(c.a)(t).div(Object(c.a)("1"+"0".repeat(-e)))}(t,-18)}var h={name:"trade",props:["contracts"],data:function(){var t;return t={contract:null,checkonmargin:!0,id:0,address:"",IndexPrice:"---",announcement:!1,liquidateprice:"",reslutlong:!0,resultshort:!0,walletBalance:"",TotalPayment:"--",ofContracts:"--",Positionafterexcution:"--",xleverage:"--",TransactionFee:"---",MinMaintenanceMarginRatio:"---",MinInitialMarginRatio:"---",FundingRateCoefficient:"---",Multiplier:"---",BaseToken:"---",Timestamp:"",ByLiquidator:"",LiquidationPrice:"---",UnrealizedPnL:"---",MarginHeld:"---",margin:"---",AverageEntryPrice:"---",position:"---",depositMargin:"",withdrawMargin:"",addmargin:0,MenualMargin:"",ContractVolume:"",unlock:!1,checkbuy:!0,leverage:0,hidemargin:!0,showmargin:!1,optional:!1,symbol:"---",balance:"--",maxmargin:"",mfee:"",connectbtn:!0,wrong:"",existing:""},n()(t,"Timestamp",""),n()(t,"date",""),t},watch:{ContractVolume:{handler:function(t,e){var i=this.position,a=+t;this.ofContracts=a,"---"!=i?(i=+i,o()("#groups").hasClass("checkshort")?this.Positionafterexcution=i-a:this.Positionafterexcution=i+a):o()("#groups").hasClass("checkshort")?this.Positionafterexcution="-"+a:this.Positionafterexcution=a,this.showmargin?this.calMargin(a):this.calMargin(a,this.leverage),0==this.addmargin?(this.existing="(deducted from existing margin)",this.TotalPayment=0):this.existing=""}},MenualMargin:{handler:function(t,e){this.addmargin=+t;var i=this.mfee+this.addmargin;0==this.addmargin?(this.existing="(deducted from existing margin)",this.TotalPayment=0):(this.existing="",this.TotalPayment=i)}},contracts:{handler:function(t,e){this.contract=t,this.address=this.contract.account,this.isUnlock(),this.getWalletBalance(),this.getSpecification(),this.getPositionInfo()}},addmargin:{handler:function(t,e){0==t?(this.existing="(deducted from existing margin)",this.TotalPayment=0):this.existing=""}}},mounted:function(){this.dit();this.id=this.$route.params.id,localStorage.getItem("timestamp")||localStorage.setItem("timestamp",0)},methods:{checkedmargind:function(){o()("#checkmargin").removeClass("checkedmarginshow"),this.checkonmargin=!0,this.depositMargin=""},checkedmarginw:function(){o()("#checkmargin").addClass("checkedmarginshow"),this.checkonmargin=!1,this.depositMargin=""},closeannouncement:function(){this.announcement=!1,localStorage.setItem("show",!1)},liquidateEvent:function(){var t=this;this.contract.liquidateEvent().then(function(e){var i=e.length;if(e.length){var a=e[i-1].returnValues;t.liquidateprice=d(a.price),localStorage.getItem("timestamp")!=a.timestamp&&(t.announcement=!0,localStorage.setItem("show",!0)),"true"==localStorage.getItem("show")&&(t.announcement=!0),localStorage.setItem("timestamp",a.timestamp);var n=a.liquidator;n=n.slice(0,6)+"***"+n.slice(n.length-4,n.length);var s=a.timestamp+"000";t.date=u()(+s).format("YYYY-MM-DD HH:mm:ss"),t.ByLiquidator=n}}).catch(function(t){console.log(t)})},place_order_sell:function(){var t=this;this.resultshort=!1;var e=this.TotalPayment,i=this.ContractVolume;return e<0&&(e=0),isNaN(i)?(alert("Please enter a positive number"),this.resultshort=!0,void o()("#modalshort").modal("hide")):+e>this.balance?(alert("insufficient balance in wallet"),this.resultshort=!0,void o()("#modalshort").modal("hide")):+i!==parseInt(i)?(this.ContractVolume="",this.resultshort=!0,alert("volume  must be round"),void o()("#modalshort").modal("hide")):(i*=-1,void this.contract.tradeWithMargin(i,e).then(function(e){console.log(e),"Pool insufficient liquidity"==e.message&&alert("The pool has insufficient liquidity for your trade"),"Trader insufficient margin"==e.message&&alert("Trader insufficient margin"),t.resultshort=!0,o()("#modalshort").modal("hide"),t.reset()}).catch(function(t){}))},place_order_buy:function(){var t=this;this.reslutlong=!1;var e=this.TotalPayment,i=this.ContractVolume;return e<0?(alert("volume has to be greater than zero"),this.reslutlong=!0,void o()("#exampleModal").modal("hide")):+e>this.balance?(alert("not sufficient funds"),this.reslutlong=!0,void o()("#exampleModal").modal("hide")):isNaN(e)?(alert("Please enter the correct number"),this.reslutlong=!0,void o()("#exampleModal").modal("hide")):isNaN(i)?(alert("Please enter a positive number"),this.reslutlong=!0,void o()("#exampleModal").modal("hide")):i<0?(alert("volume has to be greater than zero"),this.reslutlong=!0,void o()("#exampleModal").modal("hide")):+i!==parseInt(i)?(this.ContractVolume="",alert("volume  must be round"),this.reslutlong=!0,void o()("#exampleModal").modal("hide")):void this.contract.tradeWithMargin(i,e).then(function(e){console.log(e),"Pool insufficient liquidity"==e.error&&alert("The pool has insufficient liquidity for your trade"),"Trader insufficient margin"==e.error&&alert("Trader insufficient margin"),t.reslutlong=!0,o()("#exampleModal").modal("hide"),t.reset()}).catch(function(t){})},dit:function(){var t=this;o()(".rc-slider-dot").on("click",function(){var e=o()(this).index(),i=12.5*e,a=t.ContractVolume;o()(".rc-slider-handle").css("left",i+"%"),"0"==e?(t.leverage=0,t.xleverage="--",t.TotalPayment=t.mfee):(t.leverage=parseInt(o()(".rc-slider-mark-text").eq(e).text()),t.xleverage=t.leverage+"x"),a&&t.leverage&&t.calMargin(a,t.leverage),0==t.leverage&&(t.addmargin=0)})},calMargin:function(t,e){var i=this;if(this.showmargin){var a=void 0,n=this.MenualMargin;this.contract.getEstimatedFee(t).then(function(t){var e=+t;e=i.upFixed(e,2),a=+e,i.mfee=+e,0!=i.MenualMargin?(n=+i.MenualMargin,a=n+a,a=a=+i.upFixed(a,3),i.TotalPayment=a):i.TotalPayment=0})}else if("0"==e){var s=void 0,r=0;this.contract.getEstimatedFee(t).then(function(t){var e=+t;e=i.upFixed(e,2),s=+e,i.mfee=+e,r=+i.MenualMargin,s=r+s,s=s=+i.upFixed(s,3),i.TotalPayment=0!=r?s:0})}else this.contract.getEstimatedMargin(t,e).then(function(a){var n=void 0,s=+a;s=+i.upFixed(s,2),i.contract.getEstimatedFee(t).then(function(t){var a=+t;a=i.upFixed(a,2),n=+a,i.mfee=+a,i.showmargin?(s=+i.MenualMargin,n=s+n,n=n=+i.upFixed(n,3),i.TotalPayment=0!=s?n:0):void 0==e?(i.addmargin=0,i.TotalPayment=0):(i.addmargin=0,n=s+n,n=i.upFixed(n,3),i.addmargin=s,0!=i.addmargin?i.TotalPayment=n:i.TotalPayment=0)})})},closeposition:function(){var t=this,e=o()("#closeposition");this.disableButton(e),this.contract.closePosition().then(function(i){t.reset(),t.enableButton(e)}).catch(function(i){alert("Unwind failure"),t.reset(),t.enableButton(e)})},upFixed:function(t,e){var i="0";if(Number(t)&&e>0)if(e=+e||2,/e/.test(t+=""))i=t;else if(/\./.test(t)){t=t+""+Array(e+1).join("0");var a=new RegExp("-?\\d*\\.\\d{0,"+e+"}"),n=a.exec(t)[0];if(+n>=+t)i=n;else{var s=+n+ +("0."+Array(e).join("0")+"1"),r=s+(/\./.test(s+"")?"":".")+""+Array(e+1).join("0");i=a.exec(r)[0]}}else i=t+"."+Array(e+1).join("0");return i},onwithdrawMargin:function(){var t=this,e=this.withdrawMargin,i=o()("#withdrawMarginButton");this.address?e>this.maxmargin?alert("under margin"):+e<=0||isNaN(e)?alert("It has to be greater than zero"):(this.disableButton(i),console.log(e),this.contract.withdrawMargin(e).then(function(e){e.success||alert("insufficient margin o withdrow"),t.enableButton(i),t.reset()})):alert("Please Connect MetaMask wallet first!")},ondepositMargin:function(){var t=this,e=+this.depositMargin,i=o()("#depositMarginButton");this.address?e>this.walletBalance?alert("Insufficient balance in wallet"):+e<=0||isNaN(e)?alert("It has to be greater than zero"):(this.disableButton(i),this.contract.depositMargin(e).then(function(e){t.enableButton(i),t.reset()})):alert("Please Connect MetaMask wallet first!")},hideoptional:function(){this.optional=!1},showoptional:function(){this.optional=!0},reset:function(){this.getPositionInfo(),this.getSpecification(),this.getWalletBalance(),this.depositMargin="",this.withdrawMargin="",this.ContractVolume="",this.MenualMargin="",this.ofContracts="--",this.Positionafterexcution="",this.TransactionFee=0,this.addmargin=0,this.TotalPayment=0,this.$emit("load","1")},getSpecification:function(){var t=this;this.contract.getSpecification().then(function(e){var i=100*e.minInitialMarginRatio,a=100*e.minMaintenanceMarginRatio,n=100*e.feeRatio;t.symbol=e.bSymbol,t.BaseToken=e.symbol,t.FundingRateCoefficient=e.fundingRateCoefficient,t.Multiplier=e.multiplier,t.MinInitialMarginRatio=i+"%",t.MinMaintenanceMarginRatio=a+"%",t.TransactionFee=n+"%"})},getWalletBalance:function(){var t=this;this.contract.getWalletBalance().then(function(e){var i=+e;t.walletBalance=i,t.balance=i.toFixed(2)}).catch(function(t){})},getPositionInfo:function(){var t=this;this.contract.getPositionInfo().then(function(e){var i=+e.margin;t.maxmargin=i;var a=e.volume,n=+e.averageEntryPrice,s=+e.marginHeld,r=+e.pnl;if(t.margin=i.toFixed(2),t.position=a,isNaN(n)?t.AverageEntryPrice="---":t.AverageEntryPrice=n.toFixed(2),"0"==e.liquidationPrice)t.LiquidationPrice="---";else{var o=+e.liquidationPrice;t.LiquidationPrice=o.toFixed(2)}t.MarginHeld=s.toFixed(2),t.UnrealizedPnL=r.toFixed(8)}).catch(function(t){})},authorization:function(){var t=this,e=o()("#Unlock");this.disableButton(e),e.attr("disabled"),this.contract.unlock().then(function(i){t.enableButton(e),t.isUnlock()}).catch(function(t){})},hideslid:function(){this.hidemargin=!0,this.showmargin=!1,this.leverage=0,this.MenualMargin="",this.addmargin=0,this.xleverage="--",this.TotalPayment=0},showsile:function(){o()(".rc-slider-handle").css("left","0%"),this.hidemargin=!1,this.showmargin=!0,this.leverage=0,this.leverage=0,this.addmargin=0,this.xleverage="--",this.TotalPayment=this.mfee},checkedlong:function(){o()("#groups").removeClass("checkshort"),this.leverage=0,this.checkbuy=!0,this.MenualMargin="",o()(".rc-slider-handle").css("left","0%"),this.addmargin=0,this.xleverage="--",this.ContractVolume="",this.TotalPayment=this.mfee,this.isUnlock()},checkshort:function(){o()("#groups").addClass("checkshort"),this.leverage=0,this.checkbuy=!1,this.MenualMargin="",o()(".rc-slider-handle").css("left","0%"),this.addmargin=0,this.xleverage="--",this.ContractVolume="",this.TotalPayment=0,this.isUnlock()},disableButton:function(t){t.find("span.spinner").show(),t.attr("disabled",!0)},enableButton:function(t){t.find("span.spinner").hide(),t.attr("disabled",!1)},isUnlock:function(){var t=this;this.contract.isUnlocked().then(function(e){e?(o()("input").attr("disabled",!1),o()(".input-group-text").css({background:"#fff"}),t.unlock=!0):(o()("input").attr("disabled",!0),o()(".input-group-text").css({background:"#E9ECEF"}),t.unlock=!1)}).catch(function(t){})}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"comtrade"}},[a("div",{staticClass:"modal fade",staticStyle:{top:"50%",left:"50%",color:"black",transform:"translate(-50%, -25%)"},attrs:{id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),a("div",{staticClass:"modal-body",staticStyle:{color:"black"}},[a("div",[a("label",{staticStyle:{color:"black"}},[t._v("# of Contracts")]),t._v(" "),a("span",{staticClass:"modal_contracts",staticStyle:{color:"black",float:"right"}},[t._v(t._s(t.ofContracts))])]),t._v(" "),a("div",[a("label",{staticStyle:{color:"black"}},[t._v("Position after execution")]),t._v(" "),a("span",{staticClass:"afterposition",staticStyle:{color:"black",float:"right"}},[t._v(t._s(t.Positionafterexcution))])]),t._v(" "),t._m(1),t._v(" "),a("div",[a("label",{staticStyle:{color:"black"}},[t._v("Leverage")]),t._v(" "),a("span",{staticClass:"modal_leverage",staticStyle:{color:"black",float:"right"}},[t._v(t._s(t.xleverage))])]),t._v(" "),a("div",[a("label",{staticStyle:{color:"black"}},[t._v("Margin")]),t._v(" "),a("span",{staticClass:"symbol",staticStyle:{color:"black",float:"right"}},[t._v(t._s(t.symbol))]),t._v(" "),a("span",{staticClass:"modal_margin",staticStyle:{color:"black",float:"right"}},[t._v(t._s(t.addmargin))])]),t._v(" "),a("div",[a("label",{staticStyle:{color:"black"}},[t._v("Transaction Fee")]),t._v(" "),a("span",{staticClass:"exis",staticStyle:{color:"black",float:"right"}},[t._v(t._s(t.existing))]),t._v(" "),a("span",{staticClass:"symbol",staticStyle:{color:"black",float:"right"}},[t._v(t._s(t.symbol))]),t._v(" "),a("span",{staticClass:"fee",staticStyle:{color:"black",float:"right"}},[t._v(t._s(t.mfee))])]),t._v(" "),a("br"),t._v(" "),a("div",[a("label",{staticStyle:{color:"black"}},[t._v("Total Payment")]),t._v(" "),a("span",{staticClass:"symbol",staticStyle:{color:"black",float:"right"}},[t._v(t._s(t.symbol))]),t._v(" "),a("span",{staticClass:"payment",staticStyle:{color:"black",float:"right"}},[t._v(t._s(t.TotalPayment))])])]),t._v(" "),a("div",{staticClass:"modal-footer",staticStyle:{"justify-content":"center"}},[t.reslutlong?[a("button",{staticClass:"btn btn-secondary",staticStyle:{padding:"6px 20px 6px 20px"},attrs:{type:"button",id:"long_close","data-dismiss":"modal"}},[t._v("\n              Cancel\n            ")]),t._v(" "),a("button",{staticClass:"btn btn-primary",staticStyle:{padding:"6px 29px 6px 29px"},attrs:{type:"button",id:"resultlong"},on:{click:t.place_order_buy}},[t._v("\n              OK\n            ")])]:[t._m(2)]],2)])])]),t._v(" "),a("div",{staticClass:"modal fade",staticStyle:{top:"50%",left:"50%",color:"black",transform:"translate(-50%, -25%)"},attrs:{id:"modalshort",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(3),t._v(" "),a("div",{staticClass:"modal-body",staticStyle:{color:"black"}},[a("div",[a("label",{staticStyle:{color:"black"}},[t._v("# of Contracts")]),t._v(" "),a("span",{staticClass:"modal_contracts",staticStyle:{color:"black",float:"right"}},[t._v(t._s(t.ofContracts))])]),t._v(" "),a("div",[a("label",{staticStyle:{color:"black"}},[t._v("Position after execution")]),t._v(" "),a("span",{staticClass:"afterposition",staticStyle:{color:"black",float:"right"}},[t._v(t._s(t.Positionafterexcution))])]),t._v(" "),t._m(4),t._v(" "),a("div",[a("label",{staticStyle:{color:"black"}},[t._v("Leverage")]),t._v(" "),a("span",{staticClass:"modal_leverage",staticStyle:{color:"black",float:"right"}},[t._v(t._s(t.xleverage))])]),t._v(" "),a("div",[a("label",{staticStyle:{color:"black"}},[t._v("Margin")]),t._v(" "),a("span",{staticClass:"symbol",staticStyle:{color:"black",float:"right"}},[t._v(t._s(t.symbol))]),t._v(" "),a("span",{staticClass:"modal_margin",staticStyle:{color:"black",float:"right"}},[t._v(t._s(t.addmargin))])]),t._v(" "),a("div",[a("label",{staticStyle:{color:"black"}},[t._v("Transaction Fee")]),t._v(" "),a("span",{staticClass:"exis",staticStyle:{color:"black",float:"right"}},[t._v(t._s(t.existing))]),t._v(" "),a("span",{staticClass:"symbol",staticStyle:{color:"black",float:"right"}},[t._v(t._s(t.symbol))]),t._v(" "),a("span",{staticClass:"fee",staticStyle:{color:"black",float:"right"}},[t._v(t._s(t.mfee))])]),t._v(" "),a("br"),t._v(" "),a("div",[a("label",{staticStyle:{color:"black"}},[t._v("Total Payment")]),t._v(" "),a("span",{staticClass:"symbol",staticStyle:{color:"black",float:"right"}},[t._v(t._s(t.symbol))]),t._v(" "),a("span",{staticClass:"payment",staticStyle:{color:"black",float:"right"}},[t._v(t._s(t.TotalPayment))])])]),t._v(" "),a("div",{staticClass:"modal-footer",staticStyle:{"justify-content":"center"}},[t.resultshort?[a("button",{staticClass:"btn btn-secondary",staticStyle:{padding:"6px 20px 6px 20px"},attrs:{type:"button","data-dismiss":"modal",id:"short_close"}},[t._v("\n              Cancel\n            ")]),t._v(" "),a("button",{staticClass:"btn btn-primary",staticStyle:{padding:"6px 29px 6px 29px"},attrs:{type:"button",id:"resultshort"},on:{click:t.place_order_sell}},[t._v("\n              OK\n            ")])]:[t._m(5)]],2)])])]),t._v(" "),a("div",{staticClass:"tab-content"},[a("div",{staticClass:"tab-pane fade in active fcw show",attrs:{role:"tabpanel",id:"home"}},[a("div",{staticClass:"left"},[a("div",{staticClass:"text"},[t._v("\n              Wallet Balance:\n              "),a("span",{staticClass:"text-mute",attrs:{id:"balance"}},[t._v(t._s(t.balance))]),t._v(" "),a("span",{staticClass:"text-mute symbol"},[t._v(t._s(t.symbol))])]),t._v(" "),a("div",{staticClass:"mt_10 gruops checklong",attrs:{id:"groups"}},[a("div",{staticClass:"longs",attrs:{id:"checklongs"},on:{click:t.checkedlong}},[t._v("\n                LONG\n              ")]),t._v(" "),a("div",{staticClass:"shorts",attrs:{id:"checkshorts"},on:{click:t.checkshort}},[t._v("\n                SHORT\n              ")])]),t._v(" "),a("div",{staticClass:"input-group  mt_14"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.ContractVolume,expression:"ContractVolume"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Contract Volume","aria-label":"Contract-Volume","aria-describedby":"Contract-Volume",id:"place-order-volume",disabled:"disabled"},domProps:{value:t.ContractVolume},on:{input:function(e){e.target.composing||(t.ContractVolume=e.target.value)}}}),t._v(" "),t._m(6)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.hidemargin,expression:"hidemargin"}],staticClass:"leverageWrapper mt_18",staticStyle:{width:"360px",height:"36px","margin-left":"7px"},attrs:{id:"leverageWrapper"}},[a("div",{staticClass:"leverage"},[a("div",{staticClass:"orderControlsInput slider"},[a("div",{staticClass:"rc-slider rc-slider-with-marks"},[a("div",{staticClass:"rc-slider-rail"}),t._v(" "),t._m(7),t._v(" "),a("div",{staticClass:"rc-slider-handle",staticStyle:{left:"0%",right:"auto",transform:"translateX(-50%)"},attrs:{tabindex:"0",role:"slider","aria-valuemin":"0","aria-valuemax":"8","aria-valuenow":"0","aria-disabled":"false"}}),t._v(" "),a("div",{staticClass:"rc-slider-mark"},[a("span",{staticClass:"rc-slider-mark-text",staticStyle:{transform:"translateX(-50%)",left:"3%"},attrs:{title:"Trade with NO additional margin if position with surplus margin"}},[t._v("zero\n                        "),a("svg",{staticClass:"bi bi-exclamation-circle",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}}),t._v(" "),a("path",{attrs:{d:"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"}})])]),a("span",{staticClass:"rc-slider-mark-text",staticStyle:{transform:"translateX(-50%)",left:"12.5%"}},[t._v("1x")]),a("span",{staticClass:"rc-slider-mark-text",staticStyle:{transform:"translateX(-50%)",left:"25%"}},[t._v("2x")]),a("span",{staticClass:"rc-slider-mark-text",staticStyle:{transform:"translateX(-50%)",left:"37.5%"}},[t._v("3x")]),a("span",{staticClass:"rc-slider-mark-text",staticStyle:{transform:"translateX(-50%)",left:"50%"}},[t._v("5x")]),a("span",{staticClass:"rc-slider-mark-text",staticStyle:{transform:"translateX(-50%)",left:"62.5%"}},[t._v("7x")]),a("span",{staticClass:"rc-slider-mark-text",staticStyle:{transform:"translateX(-50%)",left:"75%"}},[t._v("8x")]),a("span",{staticClass:"rc-slider-mark-text",staticStyle:{transform:"translateX(-50%)",left:"87.5%"}},[t._v("9x")]),a("span",{staticClass:"rc-slider-mark-text",staticStyle:{transform:"translateX(-50%)",left:"100%"}},[t._v("10x")])])])])]),t._v(" "),a("img",{staticClass:"editLeverage",staticStyle:{position:"relative",top:"-14px",left:"104%",width:"1.125rem",height:"1.125rem",cursor:"pointer"},attrs:{src:i("W/QM"),id:"showmargin",alt:""},on:{click:t.showsile}})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showmargin,expression:"showmargin"}],staticClass:"input-group mt_18",staticStyle:{width:"100%"},attrs:{id:"place_margin"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.MenualMargin,expression:"MenualMargin"}],staticClass:"form-control number-only",attrs:{type:"text",placeholder:"Manual Margin","aria-label":"Margin","aria-describedby":"Margin",id:"place-order-margin",disabled:"disabled"},domProps:{value:t.MenualMargin},on:{input:function(e){e.target.composing||(t.MenualMargin=e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append",staticStyle:{width:"65px",background:"#E9ECEF"}},[a("span",{staticClass:"input-group-text symbol",staticStyle:{background:"#E9ECEF"},attrs:{id:"Margin"}},[t._v(t._s(t.symbol))])]),t._v(" "),a("div",{staticStyle:{display:"inline-block"}},[a("button",{staticClass:"close",attrs:{type:"button","aria-label":"关闭"}},[a("span",{staticStyle:{position:"relative",top:"5px",left:"5px"},attrs:{id:"closemargin","aria-hidden":"true"},on:{click:function(e){return e.preventDefault(),t.hideslid(e)}}},[t._v("×")])])])]),t._v(" "),a("div",{staticStyle:{"margin-top":"10px"},attrs:{id:"text-mute-long"}},[t._v("\n                Margin : "),a("span",{staticClass:"text-mute"},[t._v(t._s(t.addmargin))])]),t._v(" "),a("div",{staticClass:"container w-100 mt_13"},[a("div",{staticClass:"row justify-content-between"},[t.unlock?[t.checkbuy?a("div",{staticClass:"col-12 ml-0 pl-0",attrs:{id:"affirm_long"}},[t._m(8)]):a("div",{staticClass:"col-12 ml-0 pl-0",attrs:{id:"affirm_short"}},[t._m(9)])]:[a("div",{staticClass:"col-12 ml-0 pl-0",staticStyle:{display:"block"}},[a("button",{attrs:{id:"Unlock"},on:{click:t.authorization}},[a("span",{staticClass:"spinner spinner-border spinner-border-sm",staticStyle:{display:"none"}}),t._v("\n                      UNLOCK\n                    ")])])]],2)]),t._v(" "),a("div",{staticClass:"hr"}),t._v(" "),a("div",{staticClass:"mt_17"},[a("div",{staticClass:"text-mute"},[t._v("\n                  Position:\n                  "),a("span",{staticClass:"text-mute",attrs:{id:"balance"}},[t._v(t._s(t.position))]),t._v(" "),a("span",{staticClass:"text-mute symbol"},[t._v("Contracts ")])]),t._v(" "),a("div",{staticClass:"w-100 text_close"},[a("button",{staticClass:"btn btn-danger",staticStyle:{"margin-top":"20px"},attrs:{type:"button",id:"closeposition"},on:{click:t.closeposition}},[a("span",{staticClass:"spinner spinner-border spinner-border-sm",staticStyle:{display:"none"},attrs:{role:"status","aria-hidden":"true"}}),t._v("\n                    CLOSE POSITION\n                  ")])])]),t._v(" "),a("div",{staticClass:"hr",staticStyle:{"margin-top":"14px"}}),t._v(" "),a("div",{staticStyle:{"margin-top":"10px"},attrs:{id:"text-mute"}},[t._v("\n                Margin : "),a("span",{staticClass:"text-mute"},[t._v(t._s(t.addmargin))])]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"20px"},attrs:{id:"optional"}},[a("div",{staticClass:"mt_19"},[a("div",{staticClass:"checkmargin",attrs:{id:"checkmargin"}},[a("div",{staticClass:"checkedmargind",attrs:{id:"checkedmargind"},on:{click:t.checkedmargind}},[t._v("\n                    DEPOSIT\n                  ")]),t._v(" "),a("div",{staticClass:"checkedmarginw",attrs:{id:"checkedmarginw"},on:{click:t.checkedmarginw}},[t._v("\n                    WITHDRAW\n                  ")])]),t._v(" "),a("div",{staticClass:"input-group  mt_22"},[t.checkonmargin?a("input",{directives:[{name:"model",rawName:"v-model",value:t.depositMargin,expression:"depositMargin"}],staticClass:"form-control number-only",attrs:{type:"text",placeholder:"Deposit Margin","aria-label":"depositMargin","aria-describedby":"depositMargin",id:"depositMargin",disabled:"disabled"},domProps:{value:t.depositMargin},on:{input:function(e){e.target.composing||(t.depositMargin=e.target.value)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.withdrawMargin,expression:"withdrawMargin"}],staticClass:"form-control number-only",attrs:{type:"text",placeholder:"Withdraw Margin","aria-label":"withdrawMargin","aria-describedby":"withdrawMargin",id:"withdrawMargin",disabled:"disabled"},domProps:{value:t.withdrawMargin},on:{input:function(e){e.target.composing||(t.withdrawMargin=e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text symbol ",staticStyle:{background:"#E9ECEF"}},[t._v(t._s(t.symbol))])]),t._v(" "),t.checkonmargin?a("div",{staticClass:"w-100 mt_21"},[a("button",{attrs:{type:"button",id:"depositMarginButton"},on:{click:t.ondepositMargin}},[a("span",{staticClass:"spinner spinner-border spinner-border-sm",staticStyle:{display:"none"},attrs:{role:"status","aria-hidden":"true"}}),t._v("\n                      DEPOSIT MARGIN\n                    ")])]):a("div",{staticClass:"w-100 mt_21"},[a("button",{attrs:{type:"button",id:"withdrawMarginButton"},on:{click:t.onwithdrawMargin}},[a("span",{staticClass:"spinner spinner-border spinner-border-sm",staticStyle:{display:"none"},attrs:{role:"status","aria-hidden":"true"}}),t._v("\n                      WITHDRAW MARGIN\n                    ")])])])])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("span",{staticClass:"modal-title",staticStyle:{color:"black",margin:"0 auto"},attrs:{id:"exampleModalLabel"}},[this._v("CONFIRM")]),this._v(" "),e("button",{staticClass:"close",staticStyle:{padding:"0",margin:"0"},attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{staticStyle:{color:"gray"},attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("label",{staticStyle:{color:"black"}},[this._v("Direction")]),this._v(" "),e("span",{staticStyle:{color:"black",float:"right"}},[this._v("LONG")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"btn btn-warning",attrs:{type:"button",id:"pengding",disabled:""}},[e("span",{staticClass:"spinner spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}),this._v("\n              Pending\n            ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("span",{staticClass:"modal-title",staticStyle:{color:"black",margin:"0 auto"},attrs:{id:"exampleModalLabel"}},[this._v("CONFIRM")]),this._v(" "),e("button",{staticClass:"close",staticStyle:{padding:"0",margin:"0"},attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{staticStyle:{color:"gray"},attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("label",{staticStyle:{color:"black"}},[this._v("Direction")]),this._v(" "),e("span",{staticStyle:{color:"black",float:"right"}},[this._v("SHORT")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"btn btn-warning",attrs:{type:"button",disabled:"",id:"short_pengding"}},[e("span",{staticClass:"spinner spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}),this._v("\n              Pending\n            ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-append"},[e("span",{staticClass:"input-group-text",staticStyle:{background:"#E9ECEF"},attrs:{id:"Contract-Volume"}},[this._v("Contracts")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"rc-slider-step"},[e("span",{staticClass:"rc-slider-dot",staticStyle:{left:"0%"}}),e("span",{staticClass:"rc-slider-dot",staticStyle:{left:"12.5%"}}),e("span",{staticClass:"rc-slider-dot",staticStyle:{left:"25%"}}),e("span",{staticClass:"rc-slider-dot",staticStyle:{left:"37.5%"}}),e("span",{staticClass:"rc-slider-dot",staticStyle:{left:"50%"}}),e("span",{staticClass:"rc-slider-dot",staticStyle:{left:"62.5%"}}),e("span",{staticClass:"rc-slider-dot",staticStyle:{left:"75%"}}),e("span",{staticClass:"rc-slider-dot",staticStyle:{left:"87.5%"}}),e("span",{staticClass:"rc-slider-dot",staticStyle:{left:"100%"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{attrs:{"data-toggle":"modal","data-target":"#exampleModal",id:"place-order-buy"}},[e("span",{staticClass:"spinner spinner-border spinner-border-sm",staticStyle:{display:"none"},attrs:{role:"status","aria-hidden":"true"}}),this._v("\n                      PLACE ORDER\n                    ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{attrs:{"data-toggle":"modal","data-target":"#modalshort",id:"place-order-sell"}},[e("span",{staticClass:"spinner spinner-border spinner-border-sm",staticStyle:{display:"none"},attrs:{role:"status","aria-hidden":"true"}}),this._v("\n                      PLACE ORDER\n                    ")])}]};var v=i("VU/8")(h,p,!1,function(t){i("s/AN"),i("uujs"),i("ZAfD"),i("TI//")},"data-v-0e1c5b73",null).exports,m=i("d7EF"),f=i.n(m),_=i("Gu7T"),g=i.n(_),b=i("//Fk"),y=i.n(b),C=i("Xxa5"),w=i.n(C),k=i("pFYg"),x=i.n(k),S=i("exGp"),M=i.n(S),A=i("Zrlr"),P=i.n(A),R=i("wxAW"),I=i.n(R),T=i("5IcD"),E=i.n(T);function B(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Date((new Date).toUTCString()).getTime()/1e3-86400*t}function F(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0==e?Object(c.a)(t):e>0?Object(c.a)(t).times(Object(c.a)("1"+"0".repeat(e))):Object(c.a)(t).div(Object(c.a)("1"+"0".repeat(-e)))}function O(t){return F(t,-18)}function L(t){return F(t,18).toFixed(0).toString()}function D(t,e){return t.gte(e)?t:e}c.a.config({DECIMAL_PLACES:18,ROUNDING_MODE:c.a.ROUND_DOWN,EXPONENTIAL_AT:256});var N=function(){function t(){P()(this,t),this.web3=null,this.ethereum=null,this.account=null,this.oracleUrl=null,this.addresses=null,this.abifiles=null,this.methods=null,this.pool=null,this.bToken=null,this.pToken=null,this.lToken=null,this.symbol=null,this.bSymbol=null,this.bDecimals=null,this.multiplier=null,this.feeRatio=null,this.minPoolMarginRatio=null,this.minInitialMarginRatio=null,this.minMaintenanceMarginRatio=null,this.minAddLiquidity=null,this.redemptionFeeRatio=null,this.fundingRateCoefficient=null,this.minLiquidationReward=null,this.maxLiquidationReward=null,this.liquidationCutRatio=null,this.priceDelayAllowance=null,this.oracle={},this.balance={},this.position={volume:F(0),cost:F(0),lastCumuFundingRate:F(0),margin:F(0),lastUpdateTimestamp:F(0)},this.states={}}return I()(t,[{key:"connectWallet",value:function(){var t=M()(w.a.mark(function t(){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0==x()(window.ethereum)){t.next=9;break}return this.web3=new E.a(ethereum),this.ethereum=window.ethereum,t.next=5,ethereum.request({method:"eth_requestAccounts"});case 5:return this.account=t.sent[0],t.abrupt("return",{success:!0,account:this.account});case 9:return t.abrupt("return",{success:!1,error:"Cannot connect wallet"});case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"liquidateEvent",value:function(){var t=M()(w.a.mark(function t(){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.pool.getPastEvents("Liquidate",{filter:{owner:this.account},fromBlock:0,toBlock:"latest"},function(t,e){return e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"initialize",value:function(){var t=M()(w.a.mark(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._initializeContracts(e);case 2:return t.next=4,this._initializeParameters();case 4:return t.next=6,y.a.all([this._updateBalance(),this._updatePosition(),this._updateStates(),this._updateOracle(),this._bindEvent()]);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getSpecification",value:function(){var t=M()(w.a.mark(function t(){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{addresses:this.addresses,symbol:this.symbol,bSymbol:this.bSymbol,multiplier:this.multiplier.toString(),feeRatio:this.feeRatio.toString(),minPoolMarginRatio:this.minPoolMarginRatio.toString(),minInitialMarginRatio:this.minInitialMarginRatio.toString(),minMaintenanceMarginRatio:this.minMaintenanceMarginRatio.toString(),minAddLiquidity:this.minAddLiquidity.toString(),redemptionFeeRatio:this.redemptionFeeRatio.toString(),fundingRateCoefficient:this.fundingRateCoefficient.toString(),minLiquidationReward:this.minLiquidationReward.toString(),maxLiquidationReward:this.maxLiquidationReward.toString(),liquidationCutRatio:this.liquidationCutRatio.toString(),priceDelayAllowance:this.priceDelayAllowance.toString()});case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getPositionInfo",value:function(){var t=M()(w.a.mark(function t(){var e;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._updateOracle();case 2:return e=O(this.oracle.price),t.abrupt("return",{volume:this.position.volume.toString(),averageEntryPrice:this._calculateEntryPrice(e).toString(),margin:this.position.margin.toString(),marginHeld:this._calculateMarginHeld(e).toString(),pnl:this._calculatePnl(e).toString(),liquidationPrice:this._calculateLiquidationPrice(e).toString()});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getLiquidityInfo",value:function(){var t=M()(w.a.mark(function t(){var e;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._updateOracle();case 2:return e=O(this.oracle.price),t.abrupt("return",{poolLiquidity:this.states.liquidity.toString(),shares:this.balance.ltoken.toString(),shareValue:this._calculateShareValue(e).toString(),maxRemovableShares:this._calculateMaxRemovableShares(e).toString()});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getWalletBalance",value:function(){var t=M()(w.a.mark(function t(){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.balance.btoken.toString());case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"isUnlocked",value:function(){var t=M()(w.a.mark(function t(){var e;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._call(this.bToken,"allowance",[this.account,this.addresses.pool]);case 2:return e=O(e=t.sent),t.abrupt("return",e.gt(0));case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getEstimatedMargin",value:function(){var t=M()(w.a.mark(function t(e,i){var a;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=O(this.oracle.price),t.abrupt("return",F(e).abs().times(a).times(this.multiplier).div(F(i)).toString());case 2:case"end":return t.stop()}},t,this)}));return function(e,i){return t.apply(this,arguments)}}()},{key:"getEstimatedFee",value:function(){var t=M()(w.a.mark(function t(e){var i;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=O(this.oracle.price),t.abrupt("return",F(e).abs().times(i).times(this.multiplier).times(this.feeRatio).toString());case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"unlock",value:function(){var t=M()(w.a.mark(function t(){var e,i;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=void 0,t.prev=1,t.next=4,this._transact(this.bToken,"approve",[this.addresses.pool,"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"]);case 4:i=t.sent,e={success:!0,transaction:i},t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e={success:!1,error:t.t0};case 11:return t.abrupt("return",e);case 12:case"end":return t.stop()}},t,this,[[1,8]])}));return function(){return t.apply(this,arguments)}}()},{key:"depositMargin",value:function(){var t=M()(w.a.mark(function t(e){var i,a;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._updateOracle();case 2:return i=void 0,t.prev=3,t.next=6,this._transactPool(this.pool,"depositMargin",[L(e)]);case 6:a=t.sent,i={success:!0,transaction:a},t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),i={success:!1,error:t.t0};case 13:if(!i.success){t.next=16;break}return t.next=16,y.a.all([this._updateBalance(),this._updatePosition(),this._updateStates()]);case 16:return t.abrupt("return",i);case 17:case"end":return t.stop()}},t,this,[[3,10]])}));return function(e){return t.apply(this,arguments)}}()},{key:"withdrawMargin",value:function(){var t=M()(w.a.mark(function t(e){var i,a,n;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._updateOracle();case 2:if(i=O(this.oracle.price),a=void 0,!F(e).lte(this._calculateMaxWithdrawMargin(i))){t.next=17;break}return t.prev=5,t.next=8,this._transactPool(this.pool,"withdrawMargin",[L(e)]);case 8:n=t.sent,a={success:!0,transaction:n},t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),a={success:!1,error:t.t0};case 15:t.next=18;break;case 17:a={success:!1,error:"amount exceeds allowed"};case 18:if(!a.success){t.next=21;break}return t.next=21,y.a.all([this._updateBalance(),this._updatePosition(),this._updateStates()]);case 21:return t.abrupt("return",a);case 22:case"end":return t.stop()}},t,this,[[5,12]])}));return function(e){return t.apply(this,arguments)}}()},{key:"addLiquidity",value:function(){var t=M()(w.a.mark(function t(e){var i,a;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._updateOracle();case 2:return i=void 0,t.prev=3,t.next=6,this._transactPool(this.pool,"addLiquidity",[L(e)]);case 6:a=t.sent,i={success:!0,transaction:a},t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),i={success:!1,error:t.t0};case 13:if(!i.success){t.next=16;break}return t.next=16,y.a.all([this._updateBalance(),this._updateStates()]);case 16:return t.abrupt("return",i);case 17:case"end":return t.stop()}},t,this,[[3,10]])}));return function(e){return t.apply(this,arguments)}}()},{key:"removeLiquidity",value:function(){var t=M()(w.a.mark(function t(e){var i,a,n;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,this._updateOracle();case 3:if(i=O(this.oracle.price),a=void 0,!F(e).lte(this._calculateMaxRemovableShares(i))){t.next=18;break}return t.prev=6,t.next=9,this._transactPool(this.pool,"removeLiquidity",[L(e)]);case 9:n=t.sent,a={success:!0,transaction:n},t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),a={success:!1,error:t.t0};case 16:t.next=19;break;case 18:a={success:!1,error:"shares exceeds allowed"};case 19:if(!a.success){t.next=22;break}return t.next=22,y.a.all([this._updateBalance(),this._updateStates()]);case 22:return t.abrupt("return",a);case 23:case"end":return t.stop()}},t,this,[[6,13]])}));return function(e){return t.apply(this,arguments)}}()},{key:"tradeWithMargin",value:function(){var t=M()(w.a.mark(function t(e,i){var a,n,s,r;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._updateOracle();case 2:if(a=O(this.oracle.price),n=void 0,!(s=this._isOrderValid(a,F(e),F(i))).success){t.next=18;break}return t.prev=6,t.next=9,this._transactPool(this.pool,"tradeWithMargin",[L(e),L(i)]);case 9:r=t.sent,n={success:!0,transaction:r},t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),n={success:!1,error:t.t0};case 16:t.next=19;break;case 18:n={success:!1,error:s.message};case 19:if(!n.success){t.next=22;break}return t.next=22,y.a.all([this._updateBalance(),this._updatePosition(),this._updateStates()]);case 22:return t.abrupt("return",n);case 23:case"end":return t.stop()}},t,this,[[6,13]])}));return function(e,i){return t.apply(this,arguments)}}()},{key:"closePosition",value:function(){var t=M()(w.a.mark(function t(){var e,i,a;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.position.volume.negated(),i=void 0,e.eq(0)){t.next=15;break}return t.prev=3,t.next=6,this._transactPool(this.pool,"tradeWithMargin",[L(e),"0"]);case 6:a=t.sent,i={success:!0,transaction:a},t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),i={success:!1,error:t.t0};case 13:t.next=16;break;case 15:i={success:!1,error:"no position to close"};case 16:if(!i.success){t.next=19;break}return t.next=19,y.a.all([this._updateBalance(),this._updatePosition(),this._updateStates()]);case 19:return t.abrupt("return",i);case 20:case"end":return t.stop()}},t,this,[[3,10]])}));return function(){return t.apply(this,arguments)}}()},{key:"getfundingrate",value:function(){var t=M()(w.a.mark(function t(){var e,i,a,n,s,r,o,c,l,u,d,h,p,v,m;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=B(1),t.next=3,this._getOneDayBeforeBlock(e);case 3:return i=t.sent,t.next=6,this._getPastEvents(this.pool,"Trade",{},i);case 6:for(a=t.sent,n=this.states.tradersNetVolume.toString(),s=O(this.oracle.price).toString(),r=this.multiplier.toString(),o=this.states.liquidity.toString(),c=this.fundingRateCoefficient.toString(),0!=(l=n*s*r/o*c)&&(u=Math.floor(Math.log(l)/Math.LN10),d=(l*Math.pow(10,-u)).toFixed(4),l=d+"e"+u),h=F(0),p=0;p<a.length;p++)v=a[p],m=v.returnValues,h=F(m.tradeVolume).abs().plus(h);return h=O(h).toString(),t.abrupt("return",{fundingrate:l,tradersNetVolume:n,volume:h,liquidity:o});case 18:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"tradeEvent",value:function(){var t=M()(w.a.mark(function t(e){var i,a,n,s,r,o,c,l,u,d,h;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={owner:e},t.next=3,this._getPastEvents(this.pool,"Trade",i);case 3:a=t.sent,n=[],s=0;case 6:if(!(s<a.length)){t.next=20;break}return r=a[s],o=r.returnValues,t.next=11,this._getTimeStamp(r.blockNumber);case 11:c=t.sent,l=O(F(o.tradeVolume)),u=O(F(o.price)),d=l.abs().times(u).times(this.multiplier).times(this.minInitialMarginRatio),h=l.gt(0)?"LONG":"SHORT",n.push({direction:h,baseToken:this.bSymbol,price:O(o.price).toString(),volume:O(o.tradeVolume).toString(),notional:d.toString(),transactionFee:this._calculateFee(l,u),time:+c.timestamp+"000"});case 17:s++,t.next=6;break;case 20:return t.abrupt("return",n);case 21:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_calculateFee",value:function(t,e){return F(t).abs().times(e).times(this.multiplier).times(this.feeRatio).toString()}},{key:"_getTimeStamp",value:function(){var t=M()(w.a.mark(function t(e){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.web3.eth.getBlock(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_bindEvent",value:function(){var t=M()(w.a.mark(function t(){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.ethereum.on("accountsChanged",function(t){window.location.reload()}),this.ethereum.on("chainChanged",function(t){window.location.reload()});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"_call",value:function(){var t=M()(w.a.mark(function t(e,i){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(a=e.methods)[this.methods[i]].apply(a,g()(n)).call();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e,i){return t.apply(this,arguments)}}()},{key:"_getOneDayBeforeBlock",value:function(){var t=M()(w.a.mark(function t(e){var i,a,n;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getBlockInfo("latest");case 2:return i=t.sent,a=i.number-10800,t.next=6,this._getBlockInfo(a);case 6:n=t.sent;case 7:if(!(n.timestamp>e)){t.next=25;break}if(!(n.timestamp-e>1e3)){t.next=14;break}return t.next=11,this._getBlockInfo(n.number-120);case 11:n=t.sent,t.next=23;break;case 14:if(!(n.timestamp-e>80)){t.next=20;break}return t.next=17,this._getBlockInfo(n.number-10);case 17:n=t.sent,t.next=23;break;case 20:return t.next=22,this._getBlockInfo(n.number-1);case 22:n=t.sent;case 23:t.next=7;break;case 25:return t.abrupt("return",n.number+1);case 26:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_getBlockInfo",value:function(){var t=M()(w.a.mark(function t(e){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.web3.eth.getBlock(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_getPastEvents",value:function(){var t=M()(w.a.mark(function t(e,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"latest";return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getPastEvents(i,{filter:a,fromBlock:n,toBlock:s},function(t,e){return e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e,i){return t.apply(this,arguments)}}()},{key:"_transact",value:function(){var t=M()(w.a.mark(function t(e,i){var a,n,s,r,o,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=0,s=0;case 2:if(!(s<20)){t.next=16;break}return t.prev=3,t.next=6,(r=e.methods)[this.methods[i]].apply(r,g()(c)).estimateGas({from:this.account});case 6:return n=t.sent,n=parseInt(1.25*n),t.abrupt("break",16);case 11:t.prev=11,t.t0=t.catch(3);case 13:s++,t.next=2;break;case 16:return 0==n&&(n=532731),t.next=19,(a=e.methods)[this.methods[i]].apply(a,g()(c)).send({from:this.account,gas:n});case 19:return o=t.sent,t.abrupt("return",o);case 21:case"end":return t.stop()}},t,this,[[3,11]])}));return function(e,i){return t.apply(this,arguments)}}()},{key:"_transactPool",value:function(){var t=M()(w.a.mark(function t(e,i){var a,n,s,r,o,c,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=[this.oracle.timestamp,this.oracle.price,this.oracle.v,this.oracle.r,this.oracle.s],s=0,r=0;case 3:if(!(r<20)){t.next=17;break}return t.prev=4,t.next=7,(o=e.methods)[this.methods[i]].apply(o,g()(l).concat(n)).estimateGas({from:this.account});case 7:return s=t.sent,s=parseInt(1.25*s),t.abrupt("break",17);case 12:t.prev=12,t.t0=t.catch(4);case 14:r++,t.next=3;break;case 17:return 0==s&&(s=532731),t.next=20,(a=e.methods)[this.methods[i]].apply(a,g()(l).concat(n)).send({from:this.account,gas:s});case 20:return c=t.sent,t.abrupt("return",c);case 22:case"end":return t.stop()}},t,this,[[4,12]])}));return function(e,i){return t.apply(this,arguments)}}()},{key:"_readjson",value:function(){var t=M()(w.a.mark(function t(e){var i;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("static/config/"+e);case 2:return i=t.sent,t.next=5,i.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_initializeContracts",value:function(){var t=M()(w.a.mark(function t(e){var i,a,n,s,r,o,c;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._readjson("config.json");case 3:return i=t.sent,this.oracleUrl=i.oracleUrl,this.addresses=i.addresses[e],this.abifiles=i.abifiles,this.methods=i.methods,t.next=10,y.a.all([this._readjson(this.abifiles.pool),this._readjson(this.abifiles.bToken),this._readjson(this.abifiles.pToken),this._readjson(this.abifiles.lToken)]);case 10:a=t.sent,n=f()(a,4),s=n[0],r=n[1],o=n[2],c=n[3],this.pool=new this.web3.eth.Contract(s,this.addresses.pool),this.bToken=new this.web3.eth.Contract(r,this.addresses.bToken),this.pToken=new this.web3.eth.Contract(o,this.addresses.pToken),this.lToken=new this.web3.eth.Contract(c,this.addresses.lToken),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(0),console.log("Chain: _initializeContracts() error: "+t.t0);case 25:case"end":return t.stop()}},t,this,[[0,22]])}));return function(e){return t.apply(this,arguments)}}()},{key:"_initializeParameters",value:function(){var t=M()(w.a.mark(function t(){var e;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._call(this.pool,"symbol");case 3:return this.symbol=t.sent,t.next=6,this._call(this.bToken,"symbol");case 6:return this.bSymbol=t.sent,t.next=9,this._call(this.bToken,"decimals");case 9:return this.bDecimals=t.sent,t.next=12,this._call(this.pool,"getParameters");case 12:e=t.sent,this.multiplier=O(e.multiplier),this.feeRatio=O(e.feeRatio),this.minPoolMarginRatio=O(e.minPoolMarginRatio),this.minInitialMarginRatio=O(e.minInitialMarginRatio),this.minMaintenanceMarginRatio=O(e.minMaintenanceMarginRatio),this.minAddLiquidity=O(e.minAddLiquidity),this.redemptionFeeRatio=O(e.redemptionFeeRatio),this.fundingRateCoefficient=O(e.fundingRateCoefficient),this.minLiquidationReward=O(e.minLiquidationReward),this.maxLiquidationReward=O(e.maxLiquidationReward),this.liquidationCutRatio=O(e.liquidationCutRatio),this.priceDelayAllowance=F(e.priceDelayAllowance),t.next=30;break;case 27:t.prev=27,t.t0=t.catch(0),console.log("Chain: _initializeParameters() error: "+t.t0);case 30:case"end":return t.stop()}},t,this,[[0,27]])}));return function(){return t.apply(this,arguments)}}()},{key:"_updateBalance",value:function(){var t=M()(w.a.mark(function t(){var e,i,a,n,s;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.all([this._call(this.bToken,"balanceOf",[this.account]),this._call(this.lToken,"balanceOf",[this.account]),this._call(this.lToken,"totalSupply")]);case 3:e=t.sent,i=f()(e,3),a=i[0],n=i[1],s=i[2],this.balance.btoken=F(a,-this.bDecimals),this.balance.ltoken=O(n),this.balance.ltotal=O(s),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}},t,this,[[0,13]])}));return function(){return t.apply(this,arguments)}}()},{key:"_updatePosition",value:function(){var t=M()(w.a.mark(function t(){var e;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._call(this.pToken,"getPosition",[this.account]);case 3:e=t.sent,this.position.volume=O(e[0]),this.position.cost=O(e[1]),this.position.lastCumuFundingRate=O(e[2]),this.position.margin=O(e[3]),this.position.lastUpdateTimestamp=F(e[4]),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log("Chain update position error, using default");case 14:case"end":return t.stop()}},t,this,[[0,11]])}));return function(){return t.apply(this,arguments)}}()},{key:"_updateStates",value:function(){var t=M()(w.a.mark(function t(){var e;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._call(this.pool,"getStateValues");case 3:e=t.sent,this.states.cumuFundingRate=O(e.cumuFundingRate),this.states.cumuFundingRateBlock=F(e.cumuFundingRateBlock),this.states.liquidity=O(e.liquidity),this.states.tradersNetVolume=O(e.tradersNetVolume),this.states.tradersNetCost=O(e.tradersNetCost),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])}));return function(){return t.apply(this,arguments)}}()},{key:"_updateOracle",value:function(){var t=M()(w.a.mark(function t(){var e;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(this.oracleUrl);case 3:return e=t.sent,t.next=6,e.json();case 6:this.oracle=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(){return t.apply(this,arguments)}}()},{key:"_calculateShareValue",value:function(t){return this.balance.ltotal.eq(0)?F(0):this.states.liquidity.div(this.balance.ltotal)}},{key:"_calculateMaxRemovableShares",value:function(t){var e,i,a=this._calculateShareValue(),n=this.states.tradersNetVolume.times(t).times(this.multiplier),s=this.states.liquidity.plus(this.states.tradersNetCost).minus(n).minus(n.abs().times(this.minPoolMarginRatio));return D((e=this.balance.ltoken,i=s.div(a),e.lte(i)?e:i),F(0))}},{key:"_calculateEntryPrice",value:function(t){return this.position.volume.eq(0)?F(0):this.position.cost.div(this.position.volume).div(this.multiplier)}},{key:"_calculateMarginHeld",value:function(t){return this.position.volume.abs().times(t).times(this.multiplier).times(this.minInitialMarginRatio)}},{key:"_calculatePnl",value:function(t){return this.position.volume.times(t).times(this.multiplier).minus(this.position.cost)}},{key:"_calculateMaxWithdrawMargin",value:function(t){if(this.position.volume.eq(0))return this.position.margin;var e=this._calculateMarginHeld(t),i=this._calculatePnl(t);return D(this.position.margin.plus(i).minus(e.times(1.02)),F(0))}},{key:"_calculateLiquidationPrice",value:function(t){var e=this.position.cost.minus(this.position.margin).div(this.position.volume).div(this.multiplier),i=this.position.volume.gt(0)?e.div(F(1).minus(this.minMaintenanceMarginRatio)):e.div(F(1).plus(this.minMaintenanceMarginRatio));return i=D(i,F(0))}},{key:"_isOrderValid",value:function(t,e,i){var a=this.position.volume.plus(e).abs().times(t).times(this.multiplier).times(this.minInitialMarginRatio),n=this.states.liquidity.div(this.minPoolMarginRatio).div(t).div(this.multiplier);return this.position.margin.plus(i).gte(a)?e.lte(n.minus(this.states.tradersNetVolume))&&e.gte(n.negated().minus(this.states.tradersNetVolume))?{success:!0}:{success:!1,message:"Pool insufficient liquidity"}:{success:!1,message:"Trader insufficient margin"}}}]),t}(),q=i("99O4"),U=new N,j=new q.a;var W={name:"tradition",inject:["reload"],components:{tardingview:s.default,comtrade:v},data:function(){var t;return t={check:"1",account:"",LiquidationPrice:"--",UnrealizedPnL:"--",MarginHeld:"--",hide:!1,margin:"--",AverageEntryPrice:"--",position:"--",pooltotalliquidity:"--",fundingrate:"--",volume:"--",poolbetPosition:"--"},n()(t,"poolbetPosition","--"),n()(t,"chekshow",!0),n()(t,"chekone",!1),n()(t,"symbol","--"),n()(t,"TransactionFee","--"),n()(t,"MinMaintenanceMarginRatio","--"),n()(t,"MinInitialMarginRatio","--"),n()(t,"FundingRateCoefficient","--"),n()(t,"FundingRateCoefficient","--"),n()(t,"Multiplier","--"),n()(t,"BaseToken","--"),n()(t,"wrong",""),n()(t,"address",""),n()(t,"connectbtn",!0),n()(t,"contracts",null),n()(t,"id",0),n()(t,"pool",[]),n()(t,"bsymbol_sybol",""),n()(t,"history",[]),t},mounted:function(){this.id=this.$route.params.id,this.connectwallet();this.initialize()},methods:{checnsy:function(t){this.$router.push({params:{id:t}}),this.reload()},checkbnt:function(t){"1"==t&&(this.check=t,this.chekshow=!0,this.chekone=!1),"2"==t&&(this.check=t,this.chekshow=!1,this.chekone=!0)},connectwallet:function(){var t=this,e=+this.id;U.connectWallet().then(function(i){i.success?U.initialize(e).then(function(){t.contracts=U,t.connectbtn=!1,t.account=U.account;var e=U.account;e=e.slice(0,6)+"***"+e.slice(e.length-4,e.length),t.address=e,"3"!=ethereum.networkVersion&&(t.wrong="(Wrong Network!)");var i=t;t.getfundingrate(),t.getSpecification(),t.tradehistory();var a=setInterval(function(){i.getPositionInfo()},2e3);t.$once("hook:beforeDestroy",function(){clearInterval(a)})}):alert(i.error)}).catch(function(t){alert("Cannot connect wallet")})},getPositionInfo:function(){var t=this;U.getPositionInfo().then(function(e){var i=+e.margin;t.maxmargin=i;var a=e.volume,n=+e.averageEntryPrice,s=+e.marginHeld,r=+e.pnl;if(t.margin=i.toFixed(2),t.position=a,isNaN(n)?t.AverageEntryPrice="--":t.AverageEntryPrice=n.toFixed(2),"0"==e.liquidationPrice)t.LiquidationPrice="--";else{var o=+e.liquidationPrice;t.LiquidationPrice=o.toFixed(2)}t.MarginHeld=s.toFixed(2),t.UnrealizedPnL=r.toFixed(8)}).catch(function(t){})},getfundingrate:function(){var t=this;U.getfundingrate().then(function(e){t.fundingrate=e.fundingrate,t.pooltotalliquidity=(+e.liquidity).toFixed(2),t.volume=e.volume,t.poolbetPosition=e.tradersNetVolume}).catch(function(t){console.log(t)})},getSpecification:function(){var t=this;U.getSpecification().then(function(e){var i=100*e.minInitialMarginRatio,a=100*e.minMaintenanceMarginRatio,n=100*e.feeRatio;t.symbol=e.bSymbol,t.BaseToken=e.symbol,t.bsymbol_sybol=e.symbol+"/"+e.bSymbol,t.FundingRateCoefficient=e.fundingRateCoefficient,t.Multiplier=e.multiplier,t.MinInitialMarginRatio=i+"%",t.MinMaintenanceMarginRatio=a+"%",t.TransactionFee=n+"%"})},initialize:function(){var t=this;j._readjson("config.json").then(function(e){e.addresses.map(function(e,i){var a=new q.a;a.initialize(i).then(function(){var e={};e.bsymbol_sybol=a.symbol+"/"+a.bSymbol,e.index=i,t.pool.push(e)})})})},reset:function(t){this.getfundingrate(),this.getSpecification(),this.tradehistory()},tradehistory:function(){var t=this;U.tradeEvent(this.account).then(function(e){t.history=e.reverse(),t.history.map(function(t){t.volume=Math.abs(t.volume),t.time=u()(+t.time).format("YYYY-MM-DD HH:mm:ss")})})}}},z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"tradition"}},[a("nav",{staticClass:"navbar sticky-top navbar-expand-md navbar-dark sidebar-bg navbar-offcanvas",staticStyle:{height:"80px"}},[a("div",{staticClass:"container-fluid"},[t._m(0),t._v(" "),a("ul",{staticClass:"navb navbar-nav",attrs:{id:"menu-groovy-menu-mega"}},[t._m(1),t._v(" "),a("li",{staticClass:"menu-item menu-item-type-post_type menu-item-object-page menu-item-567"},[a("router-link",{attrs:{to:"/"}},[t._v(" Pools ")])],1),t._v(" "),a("li",{staticClass:"checkstyle menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children dropdown menu-item-539"},[a("img",{staticStyle:{"margin-right":"10px"},attrs:{src:i("CR0J"),alt:""}}),t._v(" "),a("router-link",{attrs:{to:{name:"tradition",params:{id:t.id}}}},[t._v("\n           Classic Interface\n          ")]),t._v(" "),a("svg",{staticClass:"bi bi-chevron-down",staticStyle:{cursor:"pointer","margin-left":"10px"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"}})]),t._v(" "),a("div",{staticClass:"list"},[a("div",{staticClass:"sj"}),t._v(" "),a("router-link",{staticClass:"bssy",attrs:{to:{name:"trade",params:{id:t.id}}}},[t._v("\n                Standard Interface\n              ")]),t._v(" "),a("router-link",{staticClass:"bssy",attrs:{to:{name:"tradition",params:{id:t.id}}}},[t._v("\n                Classic Interface\n              ")])],1)],1)]),t._v(" "),a("div",[t.connectbtn?a("button",{staticClass:"connect br10-rem",attrs:{type:"button",id:"connect-wallet"},on:{click:t.connectwallet}},[t._v("\n          Connect wallet\n        ")]):t._e(),t._v(" "),a("span",{staticClass:"id"},[t._v(" "+t._s(t.address))]),t._v(" "),a("br"),t._v(" "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.wrong))])])])]),t._v(" "),a("div",{staticClass:"center"},[a("div",{staticClass:"left"},[a("comtrade",{attrs:{contracts:t.contracts},on:{load:function(e){return t.reset()}}})],1),t._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"info"},[a("div",{staticClass:"trade-dashboard"},[a("div",{staticClass:"trade-dashboard-currency"},[a("div",{staticClass:"trade-dashboard-symbel"},[a("div",{staticClass:"trade-part-selector el-dropdown"},[a("span",{staticClass:"el-dropdown-link el-dropdown-selfdefine",attrs:{"aria-haspopup":"list","aria-controls":"dropdown-menu-2798",role:"button",tabindex:"0"}},[t._v("\n                  "+t._s(t.bsymbol_sybol)+"\n                  "),a("span",{staticClass:"trade-part-selector-icon"},[a("svg",{staticClass:"bi bi-chevron-down",staticStyle:{cursor:"pointer"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"}})])]),t._v(" "),a("div",{staticClass:"list"},[a("div",{staticClass:"sj"}),t._v(" "),t._l(t.pool,function(e){return a("span",{key:e.index,staticClass:"bssy",on:{click:function(i){return t.checnsy(e.index)}}},[t._v("\n                      "+t._s(e.bsymbol_sybol)+"\n                    ")])})],2)])])])]),t._v(" "),a("div",{staticClass:"trade-dashboard-split"}),t._v(" "),a("div",{staticClass:"trade-dashboard-item latest-price"},[t._m(2),t._v(" "),a("div",{staticClass:"trade-dashboard-value"},[t._v(t._s(t.fundingrate))])]),t._v(" "),a("div",{staticClass:"trade-dashboard-item latest-price"},[t._m(3),t._v(" "),a("div",{staticClass:"trade-dashboard-value"},[t._v(t._s(t.poolbetPosition))])]),t._v(" "),a("div",{staticClass:"trade-dashboard-item latest-price"},[t._m(4),t._v(" "),a("div",{staticClass:"trade-dashboard-value"},[t._v(t._s(t.volume))])]),t._v(" "),a("div",{staticClass:"trade-dashboard-item latest-price"},[t._m(5),t._v(" "),a("div",{staticClass:"trade-dashboard-value"},[t._v(t._s(t.pooltotalliquidity)+" "+t._s(t.symbol))])])])]),t._v(" "),a("div",{staticClass:"tardingview"},[a("tardingview")],1)])]),t._v(" "),a("footer",{staticClass:"footer"},[a("div",{staticClass:"contractinfo"},[a("div",{staticClass:"tab-content"},[a("div",{staticClass:"tab-pane fade in active fcw show",attrs:{role:"tabpanel"}},[a("div",{staticClass:"text-mute mt_10"},[t._v("Contract Info")]),t._v(" "),a("div",{staticClass:"hr mt_10"}),t._v(" "),a("p",{staticClass:"card-text mt_10"},[a("span",{staticClass:"key text-muted"},[t._v("Base Token")]),t._v(" "),a("span",{staticClass:"symbol float-right text-mute"},[t._v(t._s(t.symbol))])]),t._v(" "),a("p",{staticClass:"card-text"},[a("span",{staticClass:"key text-muted"},[t._v("Symbol")]),t._v(" "),a("span",{staticClass:"svalue float-right text-mute"},[t._v(t._s(t.BaseToken))])]),t._v(" "),a("p",{staticClass:"card-text"},[a("span",{staticClass:"key text-muted"},[t._v("Multiplier")]),t._v(" "),a("span",{staticClass:"value float-right text-mute"},[t._v(t._s(t.Multiplier))])]),t._v(" "),a("p",{staticClass:"card-text"},[a("span",{staticClass:"key text-muted"},[t._v("Funding Rate Coefficient")]),t._v(" "),a("span",{staticClass:"value float-right text-mute"},[t._v(t._s(t.FundingRateCoefficient))])]),t._v(" "),a("p",{staticClass:"card-text"},[a("span",{staticClass:"key text-muted"},[t._v("Min Initial Margin Ratio")]),t._v(" "),a("span",{staticClass:"value float-right text-mute"},[t._v(t._s(t.MinInitialMarginRatio))])]),t._v(" "),a("p",{staticClass:"card-text"},[a("span",{staticClass:"key text-muted"},[t._v("Min Maintenance Margin Ratio")]),t._v(" "),a("span",{staticClass:"value float-right text-mute"},[t._v(t._s(t.MinMaintenanceMarginRatio))])]),t._v(" "),a("p",{staticClass:"card-text"},[a("span",{staticClass:"key text-muted"},[t._v("Transaction Fee ")]),t._v(" "),a("span",{staticClass:"value float-right text-mute"},[t._v(t._s(t.TransactionFee))])])])])]),t._v(" "),a("div",{staticClass:"positioninfo"},[a("div",{staticClass:"tab"},[a("div",{staticClass:"tabn",class:"1"==t.check?"checked":"",on:{click:function(e){return t.checkbnt("1")}}},[t._v("Current Position")]),t._v(" "),a("div",{staticClass:"tabn",class:"2"==t.check?"checked":"",on:{click:function(e){return t.checkbnt("2")}}},[t._v("Trade History")])]),t._v(" "),a("hr",{staticStyle:{"border-top":"1px solid #253246",width:"100%","margin-bottom":"10px"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.chekshow,expression:"chekshow"}],staticClass:"current"},[t._m(6),t._v(" "),a("hr",{staticStyle:{"border-top":"1px solid #253246",width:"100%","margin-bottom":"0"}}),t._v(" "),a("div",{staticClass:"tbody",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"td"},[t._v(t._s(t.position))]),t._v(" "),a("div",{staticClass:"td"},[t._v(t._s(t.AverageEntryPrice))]),t._v(" "),a("div",{staticClass:"td"},[t._v(t._s(t.margin))]),t._v(" "),a("div",{staticClass:"td"},[t._v(t._s(t.MarginHeld))]),t._v(" "),a("div",{staticClass:"td"},[t._v(t._s(t.UnrealizedPnL))]),t._v(" "),a("div",{staticClass:"td"},[t._v(t._s(t.LiquidationPrice))])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.chekone,expression:"chekone"}],staticClass:"tradehisory"},[t._m(7),t._v(" "),a("hr",{staticStyle:{"border-top":"1px solid #253246",width:"100%","margin-top":"0px"}}),t._v(" "),t._l(t.history,function(e){return a("div",{key:e.index,staticClass:"tbody"},[a("div",{staticClass:"td"},[t._v("\n            "+t._s(e.time)+"\n          ")]),t._v(" "),a("div",{staticClass:"td"},[t._v("\n            "+t._s(e.direction)+"\n          ")]),t._v(" "),a("div",{staticClass:"td"},[t._v("\n            "+t._s(e.baseToken)+"\n          ")]),t._v(" "),a("div",{staticClass:"td"},[t._v("\n            "+t._s(e.price)+"\n          ")]),t._v(" "),a("div",{staticClass:"td"},[t._v("\n            "+t._s(e.volume)+"\n          ")]),t._v(" "),a("div",{staticClass:"td"},[t._v("\n            "+t._s(e.notional)+"\n          ")]),t._v(" "),a("div",{staticClass:"td"},[t._v("\n            "+t._s(e.transactionFee)+"\n          ")])])})],2)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("a",{attrs:{href:"https://deri.finance/"}},[e("img",{staticStyle:{width:"6.9rem",height:"2rem"},attrs:{src:i("xAza")}})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children dropdown menu-item-539"},[e("a",{attrs:{href:"https://deri.finance/"}},[this._v(" Home ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"trade-dashboard-title"},[e("span",[this._v("Funding Rate")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"trade-dashboard-title"},[e("span",[this._v("Pool Net Position")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"trade-dashboard-title"},[e("span",[this._v("Volume(24hrs)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"trade-dashboard-title"},[e("span",[this._v("Pool Total liquidity")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"theader"},[i("div",{staticClass:"th"},[t._v("Position")]),t._v(" "),i("div",{staticClass:"th"},[t._v("Average Entry Price")]),t._v(" "),i("div",{staticClass:"th"},[t._v("Margin")]),t._v(" "),i("div",{staticClass:"th"},[t._v("Margin Held")]),t._v(" "),i("div",{staticClass:"th"},[t._v("Unrealized PnL")]),t._v(" "),i("div",{staticClass:"th"},[t._v("Liquidation Price")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"theader"},[i("div",{staticClass:"th"},[t._v("Time")]),t._v(" "),i("div",{staticClass:"th"},[t._v("Direction")]),t._v(" "),i("div",{staticClass:"th"},[t._v("Base Token")]),t._v(" "),i("div",{staticClass:"th"},[t._v("Price")]),t._v(" "),i("div",{staticClass:"th"},[t._v("Volume")]),t._v(" "),i("div",{staticClass:"th"},[t._v("Notional")]),t._v(" "),i("div",{staticClass:"th"},[t._v("Transaction Fee")])])}]};var V=i("VU/8")(W,z,!1,function(t){i("ChPY"),i("8+NW")},"data-v-375d6bbd",null);e.default=V.exports},Q8d3:function(t,e){},R4wc:function(t,e,i){var a=i("kM2E");a(a.S+a.F,"Object",{assign:i("To3L")})},"TI//":function(t,e){},To3L:function(t,e,i){"use strict";var a=i("+E39"),n=i("lktj"),s=i("1kS7"),r=i("NpIQ"),o=i("sB3e"),c=i("MU5D"),l=Object.assign;t.exports=!l||i("S82l")(function(){var t={},e={},i=Symbol(),a="abcdefghijklmnopqrst";return t[i]=7,a.split("").forEach(function(t){e[t]=t}),7!=l({},t)[i]||Object.keys(l({},e)).join("")!=a})?function(t,e){for(var i=o(t),l=arguments.length,u=1,d=s.f,h=r.f;l>u;)for(var p,v=c(arguments[u++]),m=d?n(v).concat(d(v)):n(v),f=m.length,_=0;f>_;)p=m[_++],a&&!h.call(v,p)||(i[p]=v[p]);return i}:l},V3tA:function(t,e,i){i("R4wc"),t.exports=i("FeBl").Object.assign},"W/QM":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACy3fD9AAABGUlEQVQ4EbWUMU7EMBBF4wAdB6CnhH57bsHVqFZC7C32GjRUZEHQoSC2AuF9P7ZDEizbZJeRvsbjmXmxbMdV9R9mrV2jnLUULIbfJz5CN+gBnSp37Auu8N/oxcdDZ3zQ4rchIRjjW3SNGvSFnJGUPYc456nVyu7UhG3Q+ainmy4EUpuGiVwKLIKVAothJcA/wXJAD1vhZb8PwG3ZJbmfK9WVRg6FeR1AEuYXdE+drpWzGHACa4jHVyM048k9idFPKcBG95B42c1am4QJQl0aSMEJ+kBZ2BQYfr1+tRoYYz6BXTB8Y/w+SmaCKFA9gB4zvdF0HZ3dY/LgwO5pYr905Hq+Xmcu7oy+mm1yTx28kgdW303ZeuZi0m07lme0PK7Fp6cAAAAASUVORK5CYII="},ZAfD:function(t,e){},bOdI:function(t,e,i){"use strict";e.__esModule=!0;var a,n=i("C4MV"),s=(a=n)&&a.__esModule?a:{default:a};e.default=function(t,e,i){return e in t?(0,s.default)(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},ra72:function(t,e,i){(function(t){"use strict";function e(t,i){var n=a({},t);for(var s in i)"object"!=typeof t[s]||null===t[s]||Array.isArray(t[s])?void 0!==i[s]&&(n[s]=i[s]):n[s]=e(t[s],i[s]);return n}function i(){return"1.13 (internal id b235e44c @ 2019-03-20 03:56:17.207031)"}var a=Object.assign||function(t){for(var e,i=arguments,a=1,n=arguments.length;a<n;a++)for(var s in e=i[a])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},n={mobile:{disabled_features:["left_toolbar","header_widget","timeframes_toolbar","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:[]}},s={width:800,height:500,symbol:"AA",interval:"D",timezone:"Etc/UTC",container_id:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"W"},{text:"1y",resolution:"W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[]}},r=function(){function t(t){if(this._id="tradingview_"+(1048576*(1+Math.random())|0).toString(16).substring(1),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!t.datafeed)throw new Error("Datafeed is not defined");if(this._options=e(s,t),t.preset){var i=n[t.preset];i?(void 0!==this._options.disabled_features?this._options.disabled_features=this._options.disabled_features.concat(i.disabled_features):this._options.disabled_features=i.disabled_features,void 0!==this._options.enabled_features?this._options.enabled_features=this._options.enabled_features.concat(i.enabled_features):this._options.enabled_features=i.enabled_features):console.warn("Unknown preset: `"+t.preset+"`")}"Dark"===this._options.theme&&void 0===this._options.loading_screen&&(this._options.loading_screen={backgroundColor:"#131722"}),this._create()}return t.prototype.onChartReady=function(t){this._ready?t.call(this):this._readyHandlers.push(t)},t.prototype.onGrayedObjectClicked=function(t){this._innerAPI().onGrayedObjectClicked(t)},t.prototype.onShortcut=function(t,e){this._innerWindow().createShortcutAction(t,e)},t.prototype.subscribe=function(t,e){this._innerAPI().subscribe(t,e)},t.prototype.unsubscribe=function(t,e){this._innerAPI().unsubscribe(t,e)},t.prototype.chart=function(t){return this._innerAPI().chart(t)},t.prototype.setLanguage=function(t){this.remove(),this._options.locale=t,this._create()},t.prototype.setSymbol=function(t,e,i){this._innerAPI().changeSymbol(t,e+"",i)},t.prototype.remove=function(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id];var t=this._getIFrameElement();t.contentWindow.destroyChart(),t.parentNode&&t.parentNode.removeChild(t)},t.prototype.closePopupsAndDialogs=function(){this._innerAPI().closePopupsAndDialogs()},t.prototype.selectLineTool=function(t){this._innerAPI().selectLineTool(t)},t.prototype.selectedLineTool=function(){return this._innerAPI().selectedLineTool()},t.prototype.save=function(t){this._innerAPI().saveChart(t)},t.prototype.load=function(t,e){this._innerAPI().loadChart({json:t,extendedData:e})},t.prototype.getSavedCharts=function(t){this._innerAPI().getSavedCharts(t)},t.prototype.loadChartFromServer=function(t){this._innerAPI().loadChartFromServer(t)},t.prototype.saveChartToServer=function(t,e,i,a){this._innerAPI().saveChartToServer(t,e,i,a)},t.prototype.removeChartFromServer=function(t,e){this._innerAPI().removeChartFromServer(t,e)},t.prototype.onContextMenu=function(t){this._innerAPI().onContextMenu(t)},t.prototype.createButton=function(t){return this._innerWindow().createButton(t)},t.prototype.showNoticeDialog=function(t){this._innerAPI().showNoticeDialog(t)},t.prototype.showConfirmDialog=function(t){this._innerAPI().showConfirmDialog(t)},t.prototype.showLoadChartDialog=function(){this._innerAPI().showLoadChartDialog()},t.prototype.showSaveAsChartDialog=function(){this._innerAPI().showSaveAsChartDialog()},t.prototype.symbolInterval=function(){return this._innerAPI().getSymbolInterval()},t.prototype.mainSeriesPriceFormatter=function(){return this._innerAPI().mainSeriesPriceFormatter()},t.prototype.getIntervals=function(){return this._innerAPI().getIntervals()},t.prototype.getStudiesList=function(){return this._innerAPI().getStudiesList()},t.prototype.addCustomCSSFile=function(t){this._innerWindow().addCustomCSSFile(t)},t.prototype.applyOverrides=function(t){this._options=e(this._options,{overrides:t}),this._innerWindow().applyOverrides(t)},t.prototype.applyStudiesOverrides=function(t){this._innerWindow().applyStudiesOverrides(t)},t.prototype.watchList=function(){return this._innerAPI().watchlist()},t.prototype.activeChart=function(){return this._innerAPI().activeChart()},t.prototype.chartsCount=function(){return this._innerAPI().chartsCount()},t.prototype.layout=function(){return this._innerAPI().layout()},t.prototype.setLayout=function(t){this._innerAPI().setLayout(t)},t.prototype.changeTheme=function(t){this._innerWindow().changeTheme(t)},t.prototype.takeScreenshot=function(){this._innerAPI().takeScreenshot()},t.prototype.lockAllDrawingTools=function(){return this._innerAPI().lockAllDrawingTools()},t.prototype._getIFrameElement=function(){var t=document.getElementById(this._id);if(null===t)throw new Error("There is no such iframe");return t},t.prototype._innerAPI=function(){return this._getIFrameElement().contentWindow.tradingViewApi},t.prototype._innerWindow=function(){return this._getIFrameElement().contentWindow},t.prototype._autoResizeChart=function(){this._options.fullscreen&&(this._getIFrameElement().style.height=window.innerHeight+"px")},t.prototype._create=function(){var t=this,e=this._render(),i=document.getElementById(this._options.container_id);if(null===i)throw new Error("There is no such element - #"+this._options.container_id);i.innerHTML=e;var a=this._getIFrameElement();(this._options.autosize||this._options.fullscreen)&&(a.style.width="100%",this._options.fullscreen||(a.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize();var n=function(){a.removeEventListener("load",n,!1),a.contentWindow.widgetReady(function(){t._ready=!0;for(var e=0,i=t._readyHandlers;e<i.length;e++){var n=i[e];try{n.call(t)}catch(t){console.error(t)}}a.contentWindow.initializationFinished()})};a.addEventListener("load",n,!1)},t.prototype._render=function(){var t=window;t[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.customFormatters,brokerFactory:this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,customIndicatorsUrl:this._options.indicators_file_name},this._options.saved_data&&(t[this._id].chartContent={json:this._options.saved_data});var e=(this._options.library_path||"")+"static/"+this._options.locale+"-tv-chart.b235e44cb167872e5a6e.html#symbol="+encodeURIComponent(this._options.symbol)+"&interval="+encodeURIComponent(this._options.interval)+(this._options.timeframe?"&timeframe="+encodeURIComponent(this._options.timeframe):"")+(this._options.toolbar_bg?"&toolbarbg="+this._options.toolbar_bg.replace("#",""):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+this._options.debug+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"");return'<iframe id="'+this._id+'" name="'+this._id+'"  src="'+e+'"'+(this._options.autosize||this._options.fullscreen?"":' width="'+this._options.width+'" height="'+this._options.height+'"')+' frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;"></iframe>'},t}();window.TradingView=window.TradingView||{},window.TradingView.version=i,t.version=i,t.onready=function(t){window.addEventListener("DOMContentLoaded",t,!1)},t.widget=r,Object.defineProperty(t,"__esModule",{value:!0})})(e)},"s/AN":function(t,e){},uujs:function(t,e){},woOf:function(t,e,i){t.exports={default:i("V3tA"),__esModule:!0}},zMny:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("Dd8w"),n=i.n(a),s={},r=new(i("7+uW").a),o=function(t,e,i,a,o,c){var l={symbol:"BTCUSD",bars:200};switch(!0){case e.indexOf("D")>0:var u=e.substr(0,1);l.period=24*u*60*60;break;case e.indexOf("W")>0:var d=e.substr(0,1);l.period=24*d*60*60*7;break;case e.indexOf("M")>0:var h=e.substr(0,1);l.period=24*h*60*60*30;break;default:l.period=60*e}return r.$axios.get("https://oracle.deri.finance/pricekline/",{params:n()({},l)}).then(function(i){if(i.data.data.length){var a=i.data.data.map(function(t){var i=String(t.ts).length<13?1e3*t.ts:t.ts;return e.indexOf("D")>0&&(i+=288e5),e.indexOf("W")>0&&(i+=1152e5),{time:i,low:Number(t.l),high:Number(t.h),open:Number(t.o),close:Number(t.c),volume:Number(t.v)}});if(o){var n=a[a.length-1];s[t.name]={lastBar:n}}return a}return[]})},c={supported_resolutions:["1","5","15","30","60","240","1D","5D","1W","1M"]},l={onReady:function(t){setTimeout(function(){return t(c)},0)},bars:{},searchSymbols:function(t,e,i,a){},resolveSymbol:function(t,e,i){var a={name:t,timezone:"Asia/Hong_Kong",pricescale:100,ticker:t,description:"",minmov:1,session:"24x7",type:"crypto",has_intraday:!0,volume_precision:2,intraday_multipliers:["1","2","5","15","30","60","240","1D","7D","1W","1M"],has_weekly_and_monthly:!0,data_status:"streaming",has_no_volume:!0,pro_name:t,has_daily:!0,regular_session:"24x7"};setTimeout(function(){e(a)},0)},getBars:function(t,e,i,a,n,s,r){if(console.log(t,e,i),i>0&&a>0){var c=localStorage.getItem("localResolutions")||e;o(t,c,i,a,r).then(function(t){var e=t.length;console.log(t),e?1e3*a>t[e-1].time?(n(t,{noData:!1}),onResetCacheNeededCallback()):(n([],{noData:!0}),onResetCacheNeededCallback()):(n(t,{noData:!0}),onResetCacheNeededCallback())}).catch(function(t){s(t)})}},subscribeBars:function(t,e,i,a,n){},unsubscribeBars:function(t){},calculateHistoryDepth:function(t,e,i){switch(!0){case t.indexOf("D")>0:return{resolutionBack:"W",intervalBack:"1"};case t.indexOf("W")>0:return{resolutionBack:"D",intervalBack:"1"};case t.indexOf("M")>0:return{resolution:"D",resolutionBack:"M",intervalBack:"1"};default:return{resolutionBack:"D",intervalBack:"1"}}},getMarks:function(t,e,i,a,n){},getTimeScaleMarks:function(t,e,i,a,n){},getServerTime:function(t){}},u=(i("jU3W"),i("ra72")),d=localStorage.getItem("symbol")||"USDT";localStorage.getItem("localResolutions");var h={name:"coming",data:function(){return{tvWidget:null,websock:null,loading:!0,type:localStorage.getItem("localResolutions")||"1D",widgetOptions:{symbol:String("BTCUSD").replace(d,"").toUpperCase()+"/"+String(d).toUpperCase(),datafeed:l,interval:localStorage.getItem("localResolutions")||"1D",container_id:"tv_chart_container",library_path:"/static/charting_library/",locale:"en",disabled_features:["header_widget","display_market_status","timeframes_toolbar","left_toolbar","legend_context_menu","adptive_logo","use_localstorage_for_settings","edit_buttons_in_legend","control_bar","move_logo_to_main_pane"],enabled_features:["show_logo_on_all_charts"],charts_storage_url:"https://saveload.tradingview.com",charts_storage_api_version:"1.14",client_id:"tradingview.com",user_id:"public_user_id",fullscreen:!1,autosize:!0,overrides:{"paneProperties.background":"#19202b","paneProperties.vertGridProperties.color":"#19202B","paneProperties.horzGridProperties.color":"#19202B","symbolWatermarkProperties.transparency":90,"scalesProperties.textColor":"#AAA","mainSeriesProperties.candleStyle.wickUpColor":"#76af8e","mainSeriesProperties.candleStyle.wickDownColor":"#ee5766"},timezone:"Asia/Chongqing"}}},mounted:function(){var t=this,e=new u.widget(this.widgetOptions);this.tvWidget=e,e.onChartReady(function(){t.loading=!1})},methods:{changeTime:function(t){this.tvWidget.chart().refreshMarks(),localStorage.setItem("localResolutions",t),this.tvWidget.chart().setResolution(t),this.type=t}}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"tradingview"}},[i("div",{staticClass:"btn"},[i("span",{staticClass:"tab-btn",class:"1"==t.type?"active":"",on:{click:function(e){return t.changeTime("1")}}},[t._v("1min")]),t._v(" "),i("span",{staticClass:"tab-btn",class:"5"==t.type?"active":"",on:{click:function(e){return t.changeTime("5")}}},[t._v("5min")]),t._v(" "),i("span",{staticClass:"tab-btn",class:"15"==t.type?"active":"",on:{click:function(e){return t.changeTime("15")}}},[t._v("15min")]),t._v(" "),i("span",{staticClass:"tab-btn",class:"30"==t.type?"active":"",on:{click:function(e){return t.changeTime("30")}}},[t._v("30min")]),t._v(" "),i("span",{staticClass:"tab-btn",class:"60"==t.type?"active":"",on:{click:function(e){return t.changeTime("60")}}},[t._v("1hour")]),t._v(" "),i("span",{staticClass:"tab-btn",class:"1D"==t.type?"active":"",on:{click:function(e){return t.changeTime("1D")}}},[t._v("1day")]),t._v(" "),i("span",{staticClass:"tab-btn",class:"1W"==t.type?"active":"",on:{click:function(e){return t.changeTime("1W")}}},[t._v("1week")])]),t._v(" "),t.loading?i("div",{staticClass:"loading"},[t._m(0)]):t._e(),t._v(" "),i("div",{attrs:{id:"tv_chart_container"}})])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"spinner-border",attrs:{role:"status"}},[e("span",{staticClass:"sr-only"},[this._v("Loading...")])])}]};var v=i("VU/8")(h,p,!1,function(t){i("Q8d3")},"data-v-fe95f904",null);e.default=v.exports}});