webpackJsonp([4],{"9mnt":function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=a("7t+N"),s=a.n(e),n=a("Xgv0"),l=a("zf2T"),o=new n.a,r={name:"liquidity",data:function(){return{minAddLiquidity:"",margin:"--",address:"",basesymbol:"--",balance:"--",symbol:"--",unlock:!1,my_liquidity:"--",liquidity_margin:"",liquidity_volume:"",total_liquidity:"--",PerLiquidityShare:"--",connectbtn:!0,maxRemovableShares:"",id:0,removeallt:!1,wrong:""}},watch:{margin:{handler:function(t,i){}}},mounted:function(){this.id=this.$route.params.id,this.connectwallet()},methods:{reset:function(){this.getWalletBalance(),this.getSpecification(),this.getLiquidityInfo(),this.getLiquidityInfo(),this.liquidity_margin="",this.liquidity_volume=""},getSpecification:function(){var t=this;o.getSpecification().then(function(i){t.symbol=i.bSymbol})},getLiquidityInfo:function(){var t=this;o.getLiquidityInfo().then(function(i){var a=+i.poolLiquidity,e=+i.shares;t.PerLiquidityShare=i.shareValue,t.my_liquidity=e.toFixed(2),t.total_liquidity=a.toFixed(2),t.maxRemovableShares=i.maxRemovableShares,console.log(t.maxRemovableShares)})},connectwallet:function(){var t=this,i=+this.id;o.connectWallet().then(function(a){a.success?o.initialize(i).then(function(){t.connectbtn=!1;var i=o.account;i=i.slice(0,6)+"***"+i.slice(i.length-4,i.length),t.address=i,"3"!=ethereum.networkVersion&&(t.wrong="(Wrong Network!)"),t.isUnlock(),t.getWalletBalance(),t.getSpecification(),t.getLiquidityInfo(),t.getLiquidityInfo()}):alert(a.error)}).catch(function(t){alert("Cannot connect wallet")})},getWalletBalance:function(){var t=this;o.getWalletBalance().then(function(i){var a=+i;t.balance=a.toFixed(2)}).catch(function(t){})},removeall:function(){var t=this,i=s()("#removeLiquidityButton"),a=this.maxRemovableShares;this.disableButton(i),console.log(a),o.removeLiquidity(a).then(function(a){t.enableButton(i),t.reset()}),s()("#confrim").modal("hide")},removeLiquidity:function(){var t=this,i=s()("#removeLiquidityButton"),a=this.liquidity_volume,e=+this.maxRemovableShares;if(this.address)if(+a>e)alert("The input liquidity cannot exceed  "+e);else if(+a<=0||isNaN(a))alert("Invalid Liquidity!");else{if(new l.a(e).minus(new l.a(a)).abs().lte(new l.a(100))){if(s()("#confrim").modal("show"),s()(".all").text("Want to remove all ("+e+" shares)?"),!this.removeallt)return;a=e}this.disableButton(i),o.removeLiquidity(a).then(function(a){if(!a.success)return t.enableButton(i),t.reset(),void alert("failure of transaction");t.enableButton(i),t.reset()})}else alert("Please Connect MetaMask wallet first!")},addLiquidity:function(){var t=this,i=s()("#addLiquidityButton");this.address?o.getSpecification().then(function(a){t.minAddLiquidity=a.minAddLiquidity;var e=t.liquidity_margin;+e>t.balance?alert("not sufficient funds"):+e<+t.minAddLiquidity?alert("The input liquidity shall not be less than "+t.minAddLiquidity):+e<=0||isNaN(e)?alert("Please enter the correct format!"):(t.disableButton(i),o.addLiquidity(e).then(function(a){if(!a.success)return t.enableButton(i),t.reset(),void alert("failure of transaction");t.enableButton(i),t.reset()}))}):alert("Please Connect MetaMask wallet first!")},disableButton:function(t){t.find("span.spinner").show(),t.attr("disabled",!0)},enableButton:function(t){t.find("span.spinner").hide(),t.attr("disabled",!1)},authorization:function(){var t=this,i=s()("#Unlock");this.disableButton(i),o.unlock().then(function(a){t.enableButton(i),t.isUnlock()}).catch(function(t){})},isUnlock:function(){var t=this;o.isUnlocked().then(function(i){i?(s()("input").attr("disabled",!1),t.unlock=!0):(s()("input").attr("disabled",!0),t.unlock=!1)}).catch(function(t){})}}},d={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{attrs:{id:"liquiditybox"}},[a("div",{staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog",id:"confrim"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cancel")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button",id:"removeall"},on:{click:t.removeall}},[t._v("OK")])])])])]),t._v(" "),a("nav",{staticClass:"navbar sticky-top navbar-expand-md navbar-dark sidebar-bg bb1 navbar-offcanvas",staticStyle:{height:"80px"}},[a("div",{staticClass:"container-fluid"},[t._m(1),t._v(" "),a("div",[t.connectbtn?a("button",{staticClass:"connect br10-rem",attrs:{type:"button",id:"connect-wallet"},on:{click:t.connectwallet}},[t._v("\n          Connect wallet\n        ")]):t._e(),t._v(" "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.wrong))]),t._v(" "),a("span",{staticClass:"id"},[t._v(" "+t._s(t.address))])])])]),t._v(" "),a("div",{staticClass:"container-fluid",staticStyle:{width:"95.8% !important"}},[a("div",{staticClass:"row justify-content-center",staticStyle:{background:"#19202b","margin-top":"29px","margin-left":"0","margin-right":"0",height:"840px"}},[a("div",{staticClass:"mt-2 fcw",attrs:{role:"tabpanel",id:"liquidity"}},[a("div",{staticClass:"left"},[a("div",{staticClass:"text-mute"},[t._v("\n            Wallet Balance:\n            "),a("span",{staticClass:"text-mute",attrs:{id:"my-balance"}},[t._v(t._s(t.balance))]),t._v(" "),a("span",{staticClass:"text-mute symbol"},[t._v(t._s(t.symbol))])]),t._v(" "),a("div",{staticClass:"input-group mb-3 mt-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.liquidity_margin,expression:"liquidity_margin"}],staticClass:"form-control",staticStyle:{color:"black"},attrs:{type:"text",placeholder:"liquidity margin","aria-label":"liquidity-margin","aria-describedby":"liquidity-margin",id:"liquidity-margin",disabled:"disabled"},domProps:{value:t.liquidity_margin},on:{input:function(i){i.target.composing||(t.liquidity_margin=i.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text symbol"},[t._v(t._s(t.symbol))])]),t._v(" "),a("div",{staticClass:"w-100  mt-4 mb-2"},[[t.unlock?a("button",{staticClass:"add",attrs:{type:"button",id:"addLiquidityButton"},on:{click:t.addLiquidity}},[a("span",{staticClass:"spinner spinner-border spinner-border-sm",staticStyle:{display:"none"},attrs:{role:"status","aria-hidden":"true"}}),t._v("\n                  ADD LIQUIDITY\n                ")]):a("button",{staticClass:"add",attrs:{type:"button",id:"Unlock"},on:{click:t.authorization}},[a("span",{staticClass:"spinner spinner-border spinner-border-sm",staticStyle:{display:"none"},attrs:{role:"status","aria-hidden":"true"}}),t._v("\n                  UNlOCK\n                ")])]],2)]),t._v(" "),a("div",{staticClass:"text-mute",staticStyle:{"margin-top":"68px"}},[t._v("\n            My Liquidity Shares in Pool:\n            "),a("span",{staticClass:"text-mute my-liquidity"},[t._v(t._s(t.my_liquidity))])]),t._v(" "),a("div",{staticClass:"input-group mb-4 mt-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.liquidity_volume,expression:"liquidity_volume"}],staticClass:"form-control",staticStyle:{color:"black"},attrs:{type:"text",placeholder:"liquidity volume","aria-label":"liquidity-volume","aria-describedby":"liquidity-volume",id:"liquidity-volume",disabled:"disabled"},domProps:{value:t.liquidity_volume},on:{input:function(i){i.target.composing||(t.liquidity_volume=i.target.value)}}}),t._v(" "),t._m(2),t._v(" "),a("div",{staticClass:"w-100  mt-4 mb-2"},[a("button",{staticClass:"remove",attrs:{type:"button",id:"removeLiquidityButton"},on:{click:t.removeLiquidity}},[a("span",{staticClass:"spinner spinner-border spinner-border-sm",staticStyle:{display:"none"},attrs:{role:"status","aria-hidden":"true"}}),t._v("\n                REMOVE LIQUIDITY\n              ")])])])]),t._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"car"},[a("p",{staticClass:"card-text"},[a("span",{staticClass:"key text-muted"},[t._v("Pool Total Liquidity")]),t._v(" "),a("span",{staticClass:"text-mute float-right symbol",staticStyle:{"margin-left":"5px"}},[t._v(t._s(t.symbol))]),t._v(" "),a("span",{staticClass:"value float-right text-mute",attrs:{id:"total-liquidity"}},[t._v(t._s(t.total_liquidity))])]),t._v(" "),a("p",{staticClass:"card-text"},[a("span",{staticClass:"key text-muted"},[t._v("My Liquidity Shares")]),t._v(" "),a("span",{staticClass:"value float-right text-mute my-liquidity"},[t._v(t._s(t.my_liquidity))])]),t._v(" "),a("p",{staticClass:"card-text"},[a("span",{staticClass:"key text-muted"},[t._v(" Liquidity Share Value")]),t._v(" "),a("span",{staticClass:"text-mute float-right symbol",staticStyle:{"margin-left":"5px"}},[t._v(t._s(t.symbol))]),t._v(" "),a("span",{staticClass:"value float-right text-mute"},[t._v(t._s(t.PerLiquidityShare))])])])])])])])])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"modal-body"},[i("p",{staticClass:"all",staticStyle:{color:"black"}})])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",[i("a",{attrs:{href:"https://deri.finance/"}},[i("img",{staticStyle:{width:"6.9rem",height:"2rem"},attrs:{src:a("xAza")}})])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"input-group-append"},[i("span",{staticClass:"input-group-text",attrs:{id:""}},[this._v("LiquidityShares")])])}]};var c=a("VU/8")(r,d,!1,function(t){a("OSGh"),a("txQ/")},"data-v-e84d13f8",null);i.default=c.exports},OSGh:function(t,i){},"txQ/":function(t,i){}});